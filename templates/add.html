{% extends "base.html" %}

{% block title %}ìƒë‹´ ì‹ ì²­ - ì›ê´‘ëŒ€í•™êµ ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ê³¼ ìƒë‹´ ì‹œìŠ¤í…œ{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">
        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="text-center mb-8">
            <div class="bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-plus text-4xl text-blue-600"></i>
            </div>
            <h1 class="text-4xl font-bold text-gray-900 mb-2">ìƒˆ ìƒë‹´ ì‹ ì²­</h1>
            <p class="text-xl text-gray-600">ì›ê´‘ëŒ€í•™êµ ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ê³¼ ìƒë‹´ì‹œìŠ¤í…œ</p>
        </div>

        <!-- ìƒë‹´ ì‹ ì²­ í¼ -->
        <div class="bg-white rounded-2xl shadow-2xl overflow-hidden mb-8">
            <div class="bg-blue-50 px-8 py-6 border-b border-blue-100">
                <h2 class="text-2xl font-bold text-blue-900 flex items-center">
                    <i class="fas fa-edit mr-3 text-blue-600"></i>ìƒë‹´ ì‹ ì²­ì„œ
                </h2>
                <p class="text-base text-blue-700 mt-2">ëª¨ë“  í•„ìˆ˜ í•­ëª©(*)ì„ ì‘ì„±í•´ì£¼ì„¸ìš”</p>
            </div>
            
            <div class="p-8">
                <form method="POST" action="{{ url_for('add_counseling') }}" class="space-y-6">
                    <!-- ê¸°ë³¸ ì •ë³´ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="student_name" class="block text-lg font-semibold text-gray-900 mb-2">
                                <i class="fas fa-user mr-2 text-blue-600"></i>ì´ë¦„ <span class="text-red-600">*</span>
                            </label>
                            <input type="text" 
                                   class="w-full px-4 py-3 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" 
                                   id="student_name" 
                                   name="student_name" 
                                   value="{{ session.get('name', '') }}" 
                                   placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                                   required>
                        </div>
                        
                        <div>
                            <label for="grade" class="block text-lg font-semibold text-gray-900 mb-2">
                                <i class="fas fa-graduation-cap mr-2 text-green-600"></i>í•™ë…„
                            </label>
                            <select class="w-full px-4 py-3 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" 
                                    id="grade" 
                                    name="grade">
                                <option value="">í•™ë…„ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="1">1í•™ë…„</option>
                                <option value="2">2í•™ë…„</option>
                                <option value="3">3í•™ë…„</option>
                                <option value="4">4í•™ë…„</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- ì—°ë½ì²˜ -->
                    <div>
                        <label for="contact" class="block text-lg font-semibold text-gray-900 mb-2">
                            <i class="fas fa-phone mr-2 text-purple-600"></i>ì—°ë½ì²˜
                        </label>
                        <input type="tel" 
                               class="w-full px-4 py-3 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" 
                               id="contact" 
                               name="contact" 
                               placeholder="010-1234-5678">
                    </div>
                    
                    <!-- ìƒë‹´ ë¶„ì•¼ ë° ê¸´ê¸‰ë„ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="counseling_category" class="block text-lg font-semibold text-gray-900 mb-2">
                                <i class="fas fa-tags mr-2 text-orange-600"></i>ìƒë‹´ ë¶„ì•¼ <span class="text-red-600">*</span>
                            </label>
                            <select class="w-full px-4 py-3 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" 
                                    id="counseling_category" 
                                    name="counseling_category" 
                                    required>
                                <option value="">ìƒë‹´ ë¶„ì•¼ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="ACADEMIC">ğŸ“š í•™ì—… ìƒë‹´</option>
                                <option value="CAREER">ğŸ¯ ì§„ë¡œ ìƒë‹´</option>
                                <option value="CAMPUS_LIFE">ğŸ« ìº í¼ìŠ¤ ìƒí™œ</option>
                                <option value="PERSONAL">ğŸ’­ ê°œì¸ ìƒë‹´</option>
                                <option value="OTHER">â“ ê¸°íƒ€</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="urgency_level" class="block text-lg font-semibold text-gray-900 mb-2">
                                <i class="fas fa-exclamation-triangle mr-2 text-red-600"></i>ê¸´ê¸‰ë„
                            </label>
                            <select class="w-full px-4 py-3 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" 
                                    id="urgency_level" 
                                    name="urgency_level">
                                <option value="1">1 - ë‚®ìŒ ğŸ˜Œ</option>
                                <option value="2">2 - ë³´í†µ ğŸ™‚</option>
                                <option value="3" selected>3 - ì¤‘ê°„ ğŸ˜</option>
                                <option value="4">4 - ë†’ìŒ ğŸ˜°</option>
                                <option value="5">5 - ë§¤ìš° ë†’ìŒ ğŸš¨</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- ìƒë‹´ ì œëª© -->
                    <div>
                        <label for="counseling_title" class="block text-lg font-semibold text-gray-900 mb-2">
                            <i class="fas fa-heading mr-2 text-indigo-600"></i>ìƒë‹´ ì œëª© <span class="text-red-600">*</span>
                        </label>
                        <input type="text" 
                               class="w-full px-4 py-3 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" 
                               id="counseling_title" 
                               name="counseling_title" 
                               placeholder="ìƒë‹´ ì œëª©ì„ ê°„ë‹¨íˆ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì§„ë¡œ ì„ íƒ ê³ ë¯¼, í•™ìŠµ ë°©ë²• ë¬¸ì˜)"
                               required 
                               maxlength="200">
                        <div class="mt-2 flex justify-between items-center">
                            <p class="text-sm text-gray-500">
                                <i class="fas fa-lightbulb mr-1"></i>ëª…í™•í•˜ê³  êµ¬ì²´ì ì¸ ì œëª©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”
                            </p>
                            <span class="char-count text-sm text-gray-400">0/200</span>
                        </div>
                    </div>
                    
                    <!-- ìƒë‹´ ë‚´ìš© -->
                    <div>
                        <label for="counseling_content" class="block text-lg font-semibold text-gray-900 mb-2">
                            <i class="fas fa-edit mr-2 text-teal-600"></i>ìƒë‹´ ë‚´ìš© <span class="text-red-600">*</span>
                        </label>
                        <textarea class="w-full px-4 py-3 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none" 
                                  id="counseling_content" 
                                  name="counseling_content" 
                                  rows="8" 
                                  placeholder="ìƒë‹´í•˜ê³  ì‹¶ì€ ë‚´ìš©ì„ ìì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”.

ì˜ˆì‹œ:
- í˜„ì¬ ìƒí™© ì„¤ëª…
- ì–´ë–¤ ë„ì›€ì´ í•„ìš”í•œì§€
- ê¶ê¸ˆí•œ ì ì´ë‚˜ ê³ ë¯¼
- ì›í•˜ëŠ” ê²°ê³¼ë‚˜ ëª©í‘œ"
                                  required></textarea>
                        <div class="mt-3 bg-blue-50 rounded-xl p-4">
                            <p class="text-base text-blue-800 flex items-start">
                                <i class="fas fa-info-circle mr-2 mt-1 text-blue-600"></i>
                                <span>êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì‹¤ìˆ˜ë¡ ë” ì •í™•í•˜ê³  ë„ì›€ì´ ë˜ëŠ” ìƒë‹´ì„ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°œì¸ì •ë³´ëŠ” ì•ˆì „í•˜ê²Œ ë³´í˜¸ë©ë‹ˆë‹¤.</span>
                            </p>
                        </div>
                    </div>
                    
                    <!-- ì œì¶œ ë²„íŠ¼ -->
                    <div class="flex flex-col sm:flex-row gap-4 justify-end pt-6">
                        <a href="{{ url_for('index') }}" 
                           class="bg-gray-500 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:bg-gray-600 transition-colors duration-200 text-center">
                            <i class="fas fa-arrow-left mr-2"></i>ì·¨ì†Œ
                        </a>
                        <button type="submit" 
                                class="bg-blue-600 text-white px-8 py-4 rounded-xl text-lg font-semibold hover:bg-blue-700 transition-colors duration-200 shadow-lg hover:shadow-xl">
                            <i class="fas fa-paper-plane mr-2"></i>ìƒë‹´ ì‹ ì²­í•˜ê¸°
                        </button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- ìƒë‹´ ì•ˆë‚´ -->
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
            <div class="bg-gradient-to-r from-green-50 to-blue-50 px-8 py-6 border-b border-gray-100">
                <h3 class="text-2xl font-bold text-gray-900 flex items-center">
                    <i class="fas fa-info-circle mr-3 text-blue-600"></i>ìƒë‹´ ì‹ ì²­ ì•ˆë‚´
                </h3>
            </div>
            <div class="p-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- ì²˜ë¦¬ ì‹œê°„ -->
                    <div class="bg-blue-50 rounded-xl p-6">
                        <h4 class="text-xl font-bold text-blue-900 mb-4 flex items-center">
                            <i class="fas fa-clock mr-3 text-blue-600"></i>ì²˜ë¦¬ ì‹œê°„
                        </h4>
                        <ul class="space-y-2 text-base text-blue-800">
                            <li class="flex items-center">
                                <i class="fas fa-check-circle mr-2 text-green-600"></i>
                                ì¼ë°˜ ìƒë‹´: 1-2ì¼ ë‚´ ë‹µë³€
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-bolt mr-2 text-red-600"></i>
                                ê¸´ê¸‰ ìƒë‹´: ë‹¹ì¼ ë‹µë³€
                            </li>
                        </ul>
                    </div>

                    <!-- ê°œì¸ì •ë³´ ë³´í˜¸ -->
                    <div class="bg-green-50 rounded-xl p-6">
                        <h4 class="text-xl font-bold text-green-900 mb-4 flex items-center">
                            <i class="fas fa-shield-alt mr-3 text-green-600"></i>ê°œì¸ì •ë³´ ë³´í˜¸
                        </h4>
                        <ul class="space-y-2 text-base text-green-800">
                            <li class="flex items-center">
                                <i class="fas fa-lock mr-2 text-green-600"></i>
                                ìƒë‹´ ë‚´ìš©ì€ ë¹„ê³µê°œ ì²˜ë¦¬
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-user-shield mr-2 text-green-600"></i>
                                ë‹´ë‹¹ êµìˆ˜ë§Œ ì—´ëŒ ê°€ëŠ¥
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                    <!-- ìƒë‹´ ë¶„ì•¼ -->
                    <div class="bg-purple-50 rounded-xl p-6">
                        <h4 class="text-xl font-bold text-purple-900 mb-4 flex items-center">
                            <i class="fas fa-list-alt mr-3 text-purple-600"></i>ìƒë‹´ ë¶„ì•¼ ì•ˆë‚´
                        </h4>
                        <div class="space-y-3 text-base text-purple-800">
                            <div class="flex items-start">
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-lg text-sm font-semibold mr-3 mt-0.5">í•™ì—…</span>
                                <span>í•™ìŠµ ë°©ë²•, ì„±ì  ê´€ë¦¬, ìˆ˜ê°• ì‹ ì²­</span>
                            </div>
                            <div class="flex items-start">
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded-lg text-sm font-semibold mr-3 mt-0.5">ì§„ë¡œ</span>
                                <span>ì·¨ì—… ì¤€ë¹„, ì§„í•™, ìê²©ì¦, ì¸í„´ì‹­</span>
                            </div>
                            <div class="flex items-start">
                                <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-lg text-sm font-semibold mr-3 mt-0.5">ìƒí™œ</span>
                                <span>êµìš°ê´€ê³„, ë™ì•„ë¦¬, ì ì‘ ë¬¸ì œ</span>
                            </div>
                            <div class="flex items-start">
                                <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded-lg text-sm font-semibold mr-3 mt-0.5">ê°œì¸</span>
                                <span>ê°œì¸ì  ê³ ë¯¼, ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬</span>
                            </div>
                        </div>
                    </div>

                    <!-- ê¸´ê¸‰ ì—°ë½ì²˜ -->
                    <div class="bg-red-50 rounded-xl p-6">
                        <h4 class="text-xl font-bold text-red-900 mb-4 flex items-center">
                            <i class="fas fa-phone mr-3 text-red-600"></i>ê¸´ê¸‰ ì—°ë½ì²˜
                        </h4>
                        <div class="space-y-3 text-base text-red-800">
                            <div class="flex items-center justify-between bg-white rounded-lg p-3">
                                <span class="font-semibold">í•™ê³¼ì‚¬ë¬´ì‹¤</span>
                                <a href="tel:063-850-6780" class="text-blue-600 hover:text-blue-800 font-bold">
                                    063-850-6780
                                </a>
                            </div>
                            <div class="flex items-center justify-between bg-white rounded-lg p-3">
                                <span class="font-semibold">í•™ìƒìƒë‹´ì„¼í„°</span>
                                <a href="tel:063-850-5050" class="text-blue-600 hover:text-blue-800 font-bold">
                                    063-850-5050
                                </a>
                            </div>
                        </div>
                        <div class="mt-4 bg-white rounded-lg p-3">
                            <p class="text-sm text-red-700 flex items-start">
                                <i class="fas fa-exclamation-triangle mr-2 mt-0.5 text-red-600"></i>
                                <span>ìœ„ê¸‰í•œ ìƒí™©ì´ê±°ë‚˜ ì¦‰ì‹œ ë„ì›€ì´ í•„ìš”í•œ ê²½ìš° ìœ„ ë²ˆí˜¸ë¡œ ì§ì ‘ ì—°ë½ì£¼ì„¸ìš”.</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // ê¸´ê¸‰ë„ í‘œì‹œ ì—…ë°ì´íŠ¸
    const urgencySelect = document.getElementById('urgency_level');
    urgencySelect.addEventListener('change', function() {
        const level = parseInt(this.value);
        const colors = ['bg-gray-100', 'bg-blue-100', 'bg-yellow-100', 'bg-orange-100', 'bg-red-100'];
        const textColors = ['text-gray-800', 'text-blue-800', 'text-yellow-800', 'text-orange-800', 'text-red-800'];
        const labels = ['ë‚®ìŒ', 'ë³´í†µ', 'ì¤‘ê°„', 'ë†’ìŒ', 'ë§¤ìš° ë†’ìŒ'];
        
        // ì‹œê°ì  í‘œì‹œ ì—…ë°ì´íŠ¸
        this.className = this.className.replace(/bg-\w+-100/g, '') + ' ' + colors[level-1];
        console.log(`ê¸´ê¸‰ë„ ${level} (${labels[level-1]}) ì„ íƒë¨`);
    });
    
    // ê¸€ì ìˆ˜ ì¹´ìš´í„°
    const titleInput = document.getElementById('counseling_title');
    const contentTextarea = document.getElementById('counseling_content');
    
    function updateCharCount(element, maxLength) {
        const current = element.value.length;
        const remaining = maxLength - current;
        
        // ê¸€ì ìˆ˜ í‘œì‹œ ìš”ì†Œ ì—…ë°ì´íŠ¸
        const countElement = element.parentElement.querySelector('.char-count');
        if (countElement) {
            countElement.textContent = `${current}/${maxLength}`;
            if (remaining < 20) {
                countElement.className = 'char-count text-sm text-red-500 font-semibold';
            } else {
                countElement.className = 'char-count text-sm text-gray-400';
            }
        }
    }
    
    titleInput.addEventListener('input', () => updateCharCount(titleInput, 200));
    
    // í¼ ì œì¶œ ì „ í™•ì¸
    const form = document.querySelector('form');
    form.addEventListener('submit', function(e) {
        const title = titleInput.value.trim();
        const content = contentTextarea.value.trim();
        const category = document.getElementById('counseling_category').value;
        
        if (!title || !content || !category) {
            e.preventDefault();
            alert('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }
        
        if (title.length < 5) {
            e.preventDefault();
            alert('ì œëª©ì„ 5ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            titleInput.focus();
            return;
        }
        
        if (content.length < 20) {
            e.preventDefault();
            alert('ìƒë‹´ ë‚´ìš©ì„ 20ì ì´ìƒ ìì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”.');
            contentTextarea.focus();
            return;
        }
        
        // ì œì¶œ í™•ì¸
        if (!confirm('ìƒë‹´ ì‹ ì²­ì„ ì œì¶œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            e.preventDefault();
        }
    });
    
    // ì‹¤ì‹œê°„ ì…ë ¥ ë„ì›€ë§
    const categorySelect = document.getElementById('counseling_category');
    categorySelect.addEventListener('change', function() {
        const examples = {
            'ACADEMIC': 'ì˜ˆ: í”„ë¡œê·¸ë˜ë° ì–¸ì–´ í•™ìŠµ ë°©ë²•, ì „ê³µ ê³¼ëª© ì´í•´, ê³¼ì œ ë„ì›€',
            'CAREER': 'ì˜ˆ: ì·¨ì—… ì¤€ë¹„ ë°©ë²•, ì§„ë¡œ ì„ íƒ, ìê²©ì¦ ì¶”ì²œ, ëŒ€í•™ì› ì§„í•™',
            'CAMPUS_LIFE': 'ì˜ˆ: ë™ì•„ë¦¬ í™œë™, êµìš°ê´€ê³„, í•™êµ ì ì‘, ìƒí™œ ê³ ë¯¼',
            'PERSONAL': 'ì˜ˆ: ê°œì¸ì  ê³ ë¯¼, ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬, ì‹¬ë¦¬ì  ì–´ë ¤ì›€',
            'OTHER': 'ì˜ˆ: ê¸°íƒ€ ë¬¸ì˜ì‚¬í•­, í•™ê³¼ ê´€ë ¨ ì§ˆë¬¸'
        };
        
        const placeholder = examples[this.value] || 'ìƒë‹´í•˜ê³  ì‹¶ì€ ë‚´ìš©ì„ ìì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”.';
        contentTextarea.placeholder = placeholder + '\n\nìƒí™©ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ì‹œë©´ ë” ë„ì›€ì´ ë˜ëŠ” ìƒë‹´ì„ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
    });
});
</script>
{% endblock %}