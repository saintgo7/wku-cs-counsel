{% extends "base.html" %}

{% block title %}ë‚´ í”„ë¡œí•„ - ì›ê´‘ëŒ€í•™êµ ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ê³¼ ìƒë‹´ ì‹œìŠ¤í…œ{% endblock %}

{% block content %}
<div class="min-h-screen py-8 bg-gradient-to-br from-blue-50 to-purple-50">
    <div class="container mx-auto px-4 max-w-7xl">
        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="mb-8">
            <div class="flex flex-col sm:flex-row justify-between items-start gap-6">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
                        <i class="fas fa-user-circle text-blue-600 mr-4"></i>ë‚´ í”„ë¡œí•„
                    </h1>
                    <p class="text-xl text-gray-600">ê°œì¸ ì •ë³´ì™€ ìƒë‹´ í™œë™ì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”</p>
                </div>
                <div class="flex gap-4">
                    <a href="{{ url_for('index') }}" 
                       class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-2xl font-semibold transition-colors duration-200 flex items-center">
                        <i class="fas fa-home mr-2"></i>í™ˆìœ¼ë¡œ
                    </a>
                    <button onclick="editProfile()" 
                            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-2xl font-semibold transition-colors duration-200 flex items-center">
                        <i class="fas fa-edit mr-2"></i>ì •ë³´ ìˆ˜ì •
                    </button>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- í”„ë¡œí•„ ì¹´ë“œ -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-3xl shadow-2xl p-8 sticky top-8">
                    <!-- í”„ë¡œí•„ ì´ë¯¸ì§€ -->
                    <div class="text-center mb-8">
                        <div class="mx-auto mb-6 w-32 h-32 flex items-center justify-center bg-blue-100 rounded-full">
                            <i class="fas fa-user text-blue-600 text-6xl"></i>
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">{{ session.get('name', 'ì‚¬ìš©ì') }}</h2>
                        <p class="text-xl text-gray-600 mb-1">{{ session.get('student_id', 'N/A') }}</p>
                        <p class="text-gray-500">ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ê³¼</p>
                    </div>

                    <!-- ìƒíƒœ ì •ë³´ -->
                    <div class="mb-8">
                        <div class="bg-blue-50 rounded-2xl p-4 mb-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-calendar-check text-blue-600 text-2xl mr-4"></i>
                                    <span class="font-semibold text-gray-800">ê°€ì…ì¼</span>
                                </div>
                                <span class="text-gray-600">{{ session.get('join_date', '2024-01-01') }}</span>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 rounded-2xl p-4 mb-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-comments text-green-600 text-2xl mr-4"></i>
                                    <span class="font-semibold text-gray-800">ì´ ìƒë‹´ ê±´ìˆ˜</span>
                                </div>
                                <span class="text-xl font-bold text-green-600">{{ total_counselings or 0 }}ê±´</span>
                            </div>
                        </div>
                        
                        <div class="bg-purple-50 rounded-2xl p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-star text-purple-600 text-2xl mr-4"></i>
                                    <span class="font-semibold text-gray-800">í™œë™ ì ìˆ˜</span>
                                </div>
                                <span class="text-xl font-bold text-purple-600">{{ activity_score or 0 }}ì </span>
                            </div>
                        </div>
                    </div>

                    <!-- ì—°ë½ì²˜ ì •ë³´ -->
                    <div class="border-t border-gray-200 pt-6">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">
                            <i class="fas fa-address-card mr-2"></i>ì—°ë½ì²˜ ì •ë³´
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <i class="fas fa-envelope text-gray-500 mr-4 w-6"></i>
                                <span class="text-gray-800">{{ session.get('email', 'ì´ë©”ì¼ ì—†ìŒ') }}</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-phone text-gray-500 mr-4 w-6"></i>
                                <span class="text-gray-800">{{ session.get('phone', 'ì „í™”ë²ˆí˜¸ ì—†ìŒ') }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë©”ì¸ ì½˜í…ì¸  -->
            <div class="lg:col-span-2">
                <!-- ìµœê·¼ ìƒë‹´ í™œë™ -->
                <div class="bg-white rounded-3xl shadow-2xl p-8 mb-8">
                    <div class="flex items-center justify-between mb-8">
                        <h3 class="text-3xl font-bold text-gray-800">
                            <i class="fas fa-clock text-blue-600 mr-4"></i>ìµœê·¼ ìƒë‹´ í™œë™
                        </h3>
                        <a href="{{ url_for('manage_counselings') }}" 
                           class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition-colors duration-200 flex items-center">
                            ì „ì²´ë³´ê¸° <i class="bi bi-arrow-right ml-2"></i>
                        </a>
                    </div>

                    {% if recent_counselings %}
                    <div class="space-y-6">
                        {% for counseling in recent_counselings[:5] %}
                        <div class="border-l-4 border-blue-600 bg-blue-50 rounded-2xl">
                            <div class="p-6">
                                <div class="flex justify-between items-start">
                                    <div class="flex-grow">
                                        <div class="flex gap-3 mb-4">
                                            {% if counseling.counseling_category.value == 'ACADEMIC' %}
                                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">ğŸ“š í•™ì—…</span>
                                            {% elif counseling.counseling_category.value == 'CAREER' %}
                                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">ğŸš€ ì§„ë¡œ</span>
                                            {% elif counseling.counseling_category.value == 'CAMPUS_LIFE' %}
                                                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium">ğŸ« ìƒí™œ</span>
                                            {% elif counseling.counseling_category.value == 'PERSONAL' %}
                                                <span class="bg-pink-100 text-pink-800 px-3 py-1 rounded-full text-sm font-medium">ğŸ’­ ê°œì¸</span>
                                            {% endif %}
                                            
                                            {% if counseling.status.value == 'PENDING' %}
                                                <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium">â³ ëŒ€ê¸°ì¤‘</span>
                                            {% elif counseling.status.value == 'IN_PROGRESS' %}
                                                <span class="bg-cyan-100 text-cyan-800 px-3 py-1 rounded-full text-sm font-medium">âš¡ ì§„í–‰ì¤‘</span>
                                            {% elif counseling.status.value == 'COMPLETED' %}
                                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">âœ… ì™„ë£Œ</span>
                                            {% endif %}
                                        </div>
                                        <h4 class="text-xl font-bold text-gray-800 mb-3">{{ counseling.counseling_title }}</h4>
                                        <p class="text-gray-600 mb-3">
                                            {{ counseling.counseling_content[:100] }}{% if counseling.counseling_content|length > 100 %}...{% endif %}
                                        </p>
                                        <div class="flex items-center text-gray-500">
                                            <i class="bi bi-calendar mr-2"></i>
                                            <span>{{ counseling.created_date.strftime('%Y-%m-%d %H:%M') }}</span>
                                        </div>
                                    </div>
                                    <div class="ml-6">
                                        <a href="{{ url_for('view_counseling', counseling_id=counseling.id) }}" 
                                           class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl transition-colors duration-200 flex items-center">
                                            <i class="bi bi-eye mr-2"></i>ë³´ê¸°
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-16">
                        <div class="text-gray-400 mb-6 text-6xl">ğŸ“</div>
                        <h4 class="text-3xl font-bold text-gray-600 mb-4">ì•„ì§ ìƒë‹´ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</h4>
                        <p class="text-xl text-gray-500 mb-8">ì²« ìƒë‹´ì„ ì‹ ì²­í•´ë³´ì„¸ìš”!</p>
                        <a href="{{ url_for('add_counseling') }}" 
                           class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-2xl font-semibold transition-colors duration-200 inline-flex items-center">
                            <i class="bi bi-plus-lg mr-3"></i>ìƒë‹´ ì‹ ì²­í•˜ê¸°
                        </a>
                    </div>
                    {% endif %}
                </div>

                <!-- ìƒë‹´ í†µê³„ -->
                <div class="bg-white rounded-3xl shadow-2xl p-8">
                    <h3 class="text-3xl font-bold text-gray-800 mb-8">
                        <i class="bi bi-pie-chart text-purple-600 mr-4"></i>ë‚˜ì˜ ìƒë‹´ í†µê³„
                    </h3>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- ì¹´í…Œê³ ë¦¬ë³„ í†µê³„ -->
                        <div class="bg-blue-50 rounded-2xl p-6 h-full">
                            <h4 class="text-2xl font-bold text-gray-800 mb-6">
                                <i class="bi bi-tags mr-2"></i>ë¶„ì•¼ë³„ ìƒë‹´
                            </h4>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <span class="bg-blue-600 rounded-full mr-4 w-4 h-4"></span>
                                        <span class="text-gray-800 font-medium">í•™ì—… ìƒë‹´</span>
                                    </div>
                                    <span class="text-xl font-bold text-blue-600">{{ category_stats.get('ACADEMIC', 0) }}ê±´</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <span class="bg-green-600 rounded-full mr-4 w-4 h-4"></span>
                                        <span class="text-gray-800 font-medium">ì§„ë¡œ ìƒë‹´</span>
                                    </div>
                                    <span class="text-xl font-bold text-green-600">{{ category_stats.get('CAREER', 0) }}ê±´</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <span class="bg-purple-600 rounded-full mr-4 w-4 h-4"></span>
                                        <span class="text-gray-800 font-medium">ìº í¼ìŠ¤ ìƒí™œ</span>
                                    </div>
                                    <span class="text-xl font-bold text-purple-600">{{ category_stats.get('CAMPUS_LIFE', 0) }}ê±´</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <span class="bg-pink-600 rounded-full mr-4 w-4 h-4"></span>
                                        <span class="text-gray-800 font-medium">ê°œì¸ ìƒë‹´</span>
                                    </div>
                                    <span class="text-xl font-bold text-pink-600">{{ category_stats.get('PERSONAL', 0) }}ê±´</span>
                                </div>
                            </div>
                        </div>

                        <!-- ìƒíƒœë³„ í†µê³„ -->
                        <div class="bg-green-50 rounded-2xl p-6 h-full">
                            <h4 class="text-2xl font-bold text-gray-800 mb-6">
                                <i class="bi bi-graph-up mr-2"></i>ìƒíƒœë³„ í†µê³„
                            </h4>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <span class="bg-yellow-600 rounded-full mr-4 w-4 h-4"></span>
                                        <span class="text-gray-800 font-medium">ëŒ€ê¸°ì¤‘</span>
                                    </div>
                                    <span class="text-xl font-bold text-yellow-600">{{ status_stats.get('PENDING', 0) }}ê±´</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <span class="bg-cyan-600 rounded-full mr-4 w-4 h-4"></span>
                                        <span class="text-gray-800 font-medium">ì§„í–‰ì¤‘</span>
                                    </div>
                                    <span class="text-xl font-bold text-cyan-600">{{ status_stats.get('IN_PROGRESS', 0) }}ê±´</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <span class="bg-green-600 rounded-full mr-4 w-4 h-4"></span>
                                        <span class="text-gray-800 font-medium">ì™„ë£Œ</span>
                                    </div>
                                    <span class="text-xl font-bold text-green-600">{{ status_stats.get('COMPLETED', 0) }}ê±´</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <span class="bg-red-600 rounded-full mr-4 w-4 h-4"></span>
                                        <span class="text-gray-800 font-medium">ì·¨ì†Œ</span>
                                    </div>
                                    <span class="text-xl font-bold text-red-600">{{ status_stats.get('CANCELLED', 0) }}ê±´</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function editProfile() {
    alert('í”„ë¡œí•„ ìˆ˜ì • ê¸°ëŠ¥ì€ ì¶”í›„ ê°œë°œ ì˜ˆì •ì…ë‹ˆë‹¤.');
}
</script>
{% endblock %} 